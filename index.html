<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
    <title>CLAP: .NET Command-Line Auto-Parser</title>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <link rel="stylesheet" type="text/css" href="style.css"/>
    <link rel="stylesheet" type="text/css" href="syntaxhighlighter/shCore.css"/>
    <link rel="stylesheet" type="text/css" href="syntaxhighlighter/shThemeDefault.css"/>
    <link rel="stylesheet" type="text/css" href="grumble/grumble.min.css"/>
    <script type="text/javascript" src="jquery-1.6.2.min.js"></script>
    <script type="text/javascript" src="jquery-ui/jquery-ui-1.8.16.custom.min.js"></script>
    <script type="text/javascript" src="syntaxhighlighter/shCore.js"></script>
    <script type="text/javascript" src="syntaxhighlighter/shBrushCSharp.js"></script>
    <script type="text/javascript" src="syntaxhighlighter/shBrushXml.js"></script>
    <script type="text/javascript" src="syntaxhighlighter/shBrushJScript.js"></script>
    <script type="text/javascript" src="grumble/jquery.grumble.min.js"></script>
    <script type="text/javascript" src="script.js"></script>
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-20784484-3']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
</head>
<body>
    <div id="container">
        <div id="header">CLAP: .NET Command-Line Auto-Parser</div>
        <a href="http://github.com/adrianaisemberg/CLAP" target="_blank">
            <img style="position: fixed; top: 0; right: 0; border: 0;" src="images/fork-me-on-github.png" alt="Fork me on GitHub"/>
        </a>
        <div id="share">
            <!-- AddThis Button BEGIN -->
            <div class="addthis_toolbox addthis_default_style ">
                <a class="addthis_button_dzone"></a>
                <a class="addthis_button_dotnetkicks"></a>
                <a class="addthis_button_twitter"></a>
                <a class="addthis_button_facebook"></a>
                <a class="addthis_button_compact"></a>
                <a class="addthis_counter addthis_bubble_style"></a>
            </div>
            <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4e9bfccb29e01183"></script>
            <!-- AddThis Button END -->
        </div>
        <div id="center">
            <div id="left">
                <a href="#what" class="menu_item selected">INTRO</a>
                <a href="#using" class="menu_item">GETTING STARTED</a>
                <a href="#download" class="menu_item"><strong>DOWNLOAD</strong></a>
                <a href="#history" class="menu_item last_menu_item">HISTORY</a>
                <a href="#attributes" class="menu_item">ATTRIBUTES</a>
                <div class="sub_menu" menu_id="#attributes">
                    <a href="#attribute_verb" class="sub_menu_item">Verb</a>
                    <a href="#attribute_parameter" class="sub_menu_item">Parameter</a>
                    <a href="#attribute_empty" class="sub_menu_item">Empty</a>
                    <a href="#attribute_error" class="sub_menu_item">Error</a>
                    <a href="#attribute_help" class="sub_menu_item">Help</a>
                    <a href="#attribute_global" class="sub_menu_item">Global</a>
                </div>
                <a href="#file_input" class="menu_item">FILE INPUT</a>
                <a href="#custom_types" class="menu_item">CUSTOM TYPES</a>
                <a href="#validation" class="menu_item">VALIDATION</a><span class="grumbler" text="Lots of features here" angle="50" distance="100" showAfter="18000" hideAfter="3000"></span>
                <a href="#custom_validation" class="menu_item">CUSTOM VALIDATION</a>
                <div class="sub_menu" menu_id="#validation">
                    <a href="#validation_lessthan" class="sub_menu_item">LessThan</a>
                    <a href="#validation_lessorequalto" class="sub_menu_item">LessOrEqualTo</a>
                    <a href="#validation_morethan" class="sub_menu_item">MoreThan</a>
                    <a href="#validation_moreorequalto" class="sub_menu_item">MoreOrEqualTo</a>
                    <a href="#validation_regexmatches" class="sub_menu_item">RegexMatches</a>
                    <a href="#validation_fileexists" class="sub_menu_item">FileExists</a>
                    <a href="#validation_directoryexists" class="sub_menu_item">DirectoryExists</a>
                    <a href="#validation_pathexists" class="sub_menu_item">PathExists</a>
                    <a href="#validation_expression" class="sub_menu_item">Validate(Expression)</a>
                    <a href="#validation_properties" class="sub_menu_item">Properties Validation</a>
                </div>
                <a href="#interception" class="menu_item">INTERCEPTION</a>
                <div class="sub_menu" menu_id="#interception">
                    <a href="#interception_preverbexecution" class="sub_menu_item">PreVerbExecution</a>
                    <a href="#interception_postverbexecution" class="sub_menu_item">PostVerbExecution</a>
                    <a href="#interception_verbinterception" class="sub_menu_item">VerbInterception</a>
                    <a href="#interception_preverbexecutioncontext" class="sub_menu_item">PreVerbExecutionContext</a>
                    <a href="#interception_postverbexecutioncontext" class="sub_menu_item">PostVerbExecutionContext</a>
                </div>
                <a href="#expressions" class="menu_item">EXPRESSIONS</a>
                <div class="sub_menu" menu_id="#expressions">
                    <a href="#expressions_empty" class="sub_menu_item">Empty Handlers</a>
                    <a href="#expressions_help" class="sub_menu_item">Help Handlers</a>
                    <a href="#expressions_emptyhelp" class="sub_menu_item">Empty Help Handlers</a>
                    <a href="#expressions_error" class="sub_menu_item">Error Handlers</a>
                    <a href="#expressions_global" class="sub_menu_item">Global Handlers</a>
                    <a href="#expressions_preverbinterceptor" class="sub_menu_item">Pre-Verb Interceptors</a>
                    <a href="#expressions_postverbinterceptor" class="sub_menu_item">Post-Verb Interceptors</a>
                </div>
                <a href="#multi_parsers" class="menu_item last_menu_item">MULTI PARSERS</a>
                <a href="#examples" class="menu_item last_menu_item">EXAMPLES</a>
                <a href="#license" class="menu_item">LICENSE</a>
                <a href="#about" class="menu_item">ABOUT</a>
            </div>
            <div id="right">
                <noscript>
                    <div id="noscript">
                        <p>No javascript :(</p>
                        <p>You won't be able to see any content. Better use a real browser.</p>
                    </div>
                </noscript>
                <div sectionid="#what" class="content">
                    <div id="intro_code">
                        <pre class="codeblock">
    <span class="code_keyword"><span class="grumbler" text="take an existing class" angle="-70" distance="-5" showAfter="1000" hideAfter="6500"></span>class</span> <span class="code_type clapapp">ClapApp</span>
    {
        <span class="seq" timeout="8000">[<span class="code_type">Verb</span>]</span><span class="grumbler" text="add this thingy" angle="50" distance="0" showAfter="8000" hideAfter="4000"></span>
        <span class="code_keyword">public static void</span> <span class="grumbler" text="with some methods" angle="-10" distance="0" showAfter="2500" hideAfter="5000"></span>Foo(<span class="code_keyword">string</span> bar,<span class="grumbler" text="and some parameters" angle="45" distance="0" showAfter="3500" hideAfter="4000"></span> <span class="code_keyword">int</span> count)
        {
            <span class="code_keyword">for</span> (<span class="code_keyword">int</span> i = 0; i &lt; count; i++)
            {
                <span class="code_type">Console</span>.WriteLine(<span class="code_string">"This parser kicks {0}"</span>, bar);
            }
        }
    }

    <span class="seq" timeout="9000"><span class="code_keyword">class</span> <span class="code_type">Program</span>
    {
        <span class="code_keyword">static void</span> Main(<span class="code_keyword">string</span>[] args)
        {
            <span class="seq" timeout="10000"><span class="code_type">Parser</span>.Run&lt;<span class="code_type clapapp">ClapApp</span>>(args);</span><span class="grumbler" text="and also this line" angle="60" distance="-5" showAfter="10000" hideAfter="3000"></span>
        }
    }</span>
                        </pre>
                    </div>
                    <pre class="console seq" timeout="13000">
<span class="commandline">C:\> myexe foo -bar=Ass! -count=10</span><span class="grumbler" text="Parsing is automatic!" angle="30" distance="5" showAfter="14000" hideAfter="3000"></span>
<span class="seq" timeout="16000">This parser kicks Ass!</span>
<span class="seq" timeout="16100">This parser kicks Ass!</span>
<span class="seq" timeout="16200">This parser kicks Ass!</span>
<span class="seq" timeout="16300">This parser kicks Ass!</span>
<span class="seq" timeout="16400">This parser kicks Ass!</span>
<span class="seq" timeout="16500">This parser kicks Ass!</span>
<span class="seq" timeout="16600">This parser kicks Ass!</span>
<span class="seq" timeout="16700">This parser kicks Ass!</span>
<span class="seq" timeout="16800">This parser kicks Ass!</span>
<span class="seq" timeout="16900">This parser kicks Ass!</span></pre>
                </div>
                <div sectionid="#using" class="content">
                    <h3>Getting Started</h3>
                    <ol>
                        <li>Get CLAP (either download the binaries or install it with NuGet. See the Download section)</li>
                        <li>Add a reference to the dll from your Console or Windows application</li>
                        <li>Add a <code>using</code> statement: <code class="highlight">using CLAP;</code></li>
                        <li>Implement a verbs class (see the Attributes section)</li>
                        <li>
                            From your <code>void Main</code> method, add a call to CLAP's parser using your class:<br/>
                            <pre class="brush: csharp, highlight: 3">
                                static void Main(string[] args)
                                {
                                    Parser.Run&lt;TheApp>(args);
                                }
                            </pre>
                        </li>
                    </ol>
                    <h3>Static vs. Instance</h3>
                    <p>
                        If all the verbs of a class are static, using the above example is enough.
                        However, if the verbs are not static, calling the parser requires an instance of the class.
                    </p>
                    <p>The following example shows how to the parser with a instance of the class:</p>
                    <pre class="brush: csharp, highlight: 5">
                        static void Main(string[] args)
                        {
                            var theApp = new TheApp();

                            Parser.Run(args, theApp);
                        }
                    </pre>
                    <h3>Installing CLAP using NuGet</h3>
                    <p>If you have NuGet installed, steps 1-2 can be skipped.</p>
                    <p>Either find CLAP from the NuGet manager, or run the following command from NuGet's console:</p>
                    <p class="console"><strong>PM></strong> Install-Package clap</p>
                </div>
                <div sectionid="#attributes" class="content">
                    <h3>Attributes</h3>
                    <p>Using CLAP with attributes is the easiest way to create your app's functionality.</p>
                    <p>CLAP's attributes allow you to define various verbs, parameters, global parameters, even error-handling and more.</p>
                    <p>There's no reason for your <code class="highlight">void Main()</code> method to be more than a single line of code.</p>
                    <div class="attribute_wrapper" id="attribute_verb">
                        <div class="attribute">
                            <div class="attribute_name mono">Verb</div>
                            <div class="attribute_description">
                                <p>Marks a method as an available verb.</p>
                            </div>
                            <div class="attribute_properties">
                                <h3>Properties:</h3>
                                <div class="attribute_property">
                                    <div class="attribute_property_name mono">IsDefault (Boolean)</div>
                                    <div class="attribute_property_description">
                                        <p>Whether this verb is the class's default.</p>
                                        <p>A default verb is called when no verb argument was entered.</p>
                                        <p>
                                            Only a single verb can be set as default. Having more than one default verb
                                            will throw a <code>MoreThanOneDefaultVerbException</code>.
                                        </p>
                                    </div>
                                </div>
                                <div class="attribute_property">
                                    <div class="attribute_property_name mono">Aliases (String)</div>
                                    <div class="attribute_property_description">Additional aliases for the verb.</div>
                                </div>
                                <div class="attribute_property">
                                    <div class="attribute_property_name mono">Description (String)</div>
                                    <div class="attribute_property_description">Used to describe the verb when displaying help.</div>
                                </div>
                            </div>
                            <div class="attribute_samples">
                                <h3>Example:</h3>
                                <pre class="brush: csharp, highlight: 3">
                                    class Program
                                    {
                                        [Verb(IsDefault = true)]
                                        void Foo()
                                        {
                                        }
                                    }
                                </pre>
                            </div>
                        </div>
                    </div>
                    <div class="attribute_wrapper" id="attribute_parameter">
                        <div class="attribute">
                            <div class="attribute_name mono">Parameter</div>
                            <div class="attribute_description">
                                <p>Adds additional properties to verb's parameters.</p>
                                <p>Using the Parameter attribute is only required if any of the properties is needed, otherwise, it is optional.</p>
                                <h3>Supported types:</h3>
                                <ul>
                                    <li>String</li>
                                    <li>Numeric (int, float etc)</li>
                                    <li>Boolean (can also used as switches: <code class="highlight">-p=true</code> is the same as <code class="highlight">-p</code>)</li>
                                    <li>Enums</li>
                                    <li>Guid</li>
                                    <li>Uri</li>
                                    <li>Arrays of all the above (as CSV)</li>
                                    <li><strong>Any other type as a JSON/XML string</strong>. See <a class="link" href="#file_input">File Input</a></li>
                                </ul>
                            </div>
                            <div class="attribute_properties">
                                <h3>Properties:</h3>
                                <div class="attribute_property">
                                    <div class="attribute_property_name mono">Default (Object)</div>
                                    <div class="attribute_property_description">The default value of the parameter, in case no input was provided</div>
                                </div>
                                <div class="attribute_property">
                                    <div class="attribute_property_name mono">Required (Boolean)</div>
                                    <div class="attribute_property_description">Whether the parameter is required</div>
                                </div>
                                <div class="attribute_property">
                                    <div class="attribute_property_name mono">Aliases (String)</div>
                                    <div class="attribute_property_description">Additional aliases for the parameter</div>
                                </div>
                                <div class="attribute_property">
                                    <div class="attribute_property_name mono">Description (String)</div>
                                    <div class="attribute_property_description">Used to describe the verb when displaying help</div>
                                </div>
                            </div>
                            <div class="attribute_samples">
                                <h3>Example:</h3>
                                <pre class="brush: csharp, highlight: [5,6]">
                                    class Program
                                    {
                                        [Verb]
                                        void Foo(
                                            [Parameter(Required = true)] string name,
                                            [Parameter(Default = 5)] int count,
                                            bool upperCase,
                                            int[] numbers)
                                        {
                                        }
                                    }
                                </pre>
                            </div>
                        </div>
                    </div>
                    <div class="attribute_wrapper" id="attribute_empty">
                        <div class="attribute">
                            <div class="attribute_name mono">Empty</div>
                            <div class="attribute_description">
                                <p>Marks a method to execute when no input was provided by the user.</p>
                                <p>Only a single method can be marked with <code class="highlight">[Empty]</code> in a class.</p>
                                <p>
                                    Trying to mark more than one <code>[Empty]</code>
                                    will throw a <code>MoreThanOneEmptyHandlerException</code>.
                                </p>
                            </div>
                            <div class="attribute_samples">
                                <h3>Example:</h3>
                                <pre class="brush: csharp, highlight: 8">
                                    class Program
                                    {
                                        [Verb]
                                        void Foo()
                                        {
                                        }

                                        [Empty]
                                        void NoInput()
                                        {
                                        }
                                    }
                                </pre>
                            </div>
                        </div>
                    </div>
                    <div class="attribute_wrapper" id="attribute_error">
                        <div class="attribute">
                            <div class="attribute_name mono">Error</div>
                            <div class="attribute_description">
                                <p>Marks a method to execute when an error occurs.</p>
                                <p>Only a single method can be marked with <code class="highlight">[Error]</code> and it must match the following signature:</p>
                                <code class="highlight">void Error(ExceptionContext context) {}</code>
                                <h4>Notice that there is no restriction for the name of the method, only the signature.</h4>
                                <p>
                                    Trying to mark more than one <code>[Error]</code>
                                    will throw a <code>MoreThanOneErrorHandlerException</code>.
                                </p>
                            </div>
                            <div class="attribute_samples">
                                <h3>Example:</h3>
                                <pre class="brush: csharp, highlight: 8">
                                    class Program
                                    {
                                        [Verb]
                                        void Foo()
                                        {
                                        }

                                        [Error]
                                        void HandleError(ExceptionContext context)
                                        {
                                            if ( // something ...
                                            {
                                                context.ReThrow = true;
                                            }
                                        }
                                    }
                                </pre>
                            </div>
                            <div class="note">
                                <h4>ExceptionContext</h4>
                                <div class="attribute_properties">
                                    <div class="attribute_property">
                                        <div class="attribute_property_name mono">Exception (Exception)</div>
                                        <div class="attribute_property_description">The exception that was thrown during execution</div>
                                    </div>
                                    <div class="attribute_property">
                                        <div class="attribute_property_name mono">ReThrow (Boolean)</div>
                                        <div class="attribute_property_description">Whether to re-throw the exception after handling it</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="attribute_wrapper" id="attribute_help">
                        <div class="attribute">
                            <div class="attribute_name mono">Help</div>
                            <div class="attribute_description">
                                <p>Marks a method to execute when the user requests for help.</p>
                                <p>The method must match the following signature:</p>
                                <code class="highlight">void Help(string help) {}</code>
                            </div>
                            <div class="attribute_properties">
                                <h3>Properties:</h3>
                                <div class="attribute_property">
                                    <div class="attribute_property_name mono">Name (String)</div>
                                    <div class="attribute_property_description">The parameter name for the help. If none specified - the method name is used instead.</div>
                                </div>
                                <div class="attribute_property">
                                    <div class="attribute_property_name mono">Aliases (String)</div>
                                    <div class="attribute_property_description">Additional aliases for the parameter name</div>
                                </div>
                            </div>
                            <div class="attribute_samples">
                                <h3>Example:</h3>
                                <pre class="brush: csharp, highlight: 8">
                                    class Program
                                    {
                                        [Verb]
                                        void Foo()
                                        {
                                        }

                                        [Help]
                                        void ShowHelp(string help)
                                        {
                                        }
                                    }
                                </pre>
                            </div>
                        </div>
                    </div>
                    <div class="attribute_wrapper" id="attribute_global">
                        <div class="attribute">
                            <div class="attribute_name mono">Global</div>
                            <div class="attribute_description">
                                <p>Marks a method as a global parameter. A global parameter is available for all verbs within a class.</p>
                                <p>
                                    The global attribute can be applied only to methods that accept no more than a single supported parameter.
                                    If a method has no parameters - it is treated as a boolean switch.
                                </p>
                                <p>All globals are called before the executing verb.</p>
                            </div>
                            <div class="attribute_properties">
                                <h3>Properties:</h3>
                                <div class="attribute_property">
                                    <div class="attribute_property_name mono">Name (String)</div>
                                    <div class="attribute_property_description">The parameter name. If none specified - the method name is used instead.</div>
                                </div>
                                <div class="attribute_property">
                                    <div class="attribute_property_name mono">Aliases (String)</div>
                                    <div class="attribute_property_description">Additional aliases for the parameter name</div>
                                </div>
                                <div class="attribute_property">
                                    <div class="attribute_property_name mono">Description (String)</div>
                                    <div class="attribute_property_description">Used to describe the parameter when displaying help</div>
                                </div>
                            </div>
                            <div class="attribute_samples">
                                <h3>Example:</h3>
                                <pre class="brush: csharp, highlight: [8,13]">
                                    class Program
                                    {
                                        [Verb]
                                        void Foo()
                                        {
                                        }

                                        [Global]
                                        void Log(string message)
                                        {
                                        }

                                        [Global(Aliases="d")]
                                        void Debug()
                                        {
                                            Debugger.Launch();
                                        }
                                    }
                                </pre>
                            </div>
                        </div>
                    </div>
                </div>
                <div sectionid="#file_input" class="content">
                    <h3>File Input</h3>
                    <p>
                        In-addition to passing values to parameters in the regular way (<code>-param=value</code>),
                        CLAP supports passing the content of text files as input to parameters.
                    </p>
                    <p>
                        A good motivation for using this feature is when using a custom class as an input argument.
                        A custom class requires a JSON/XML string as an argument value and passing such a string is easier within
                        a text file.
                    </p>
                    <p>
                        Passing the content of a file to a parameter is by adding a <code class="highlight">@</code> 
                        after the parameter name using the following syntax:
                    </p>
                    <p>
                        <code class="highlight">-param@=<em>file_path</em></code>
                    </p>
                    <div class="note">
                        <h4><code>:</code> vs <code>=</code></h4>
                        <p>
                            As a parameter-value separator, CLAP supports both <code class="highlight">:</code> and 
                            <code class="highlight">=</code>.
                        </p>
                        <p>
                            It is better to use <code class="highlight">=</code> because the console (cmd.exe) does not
                            support tab-completion after the <code class="highlight">:</code> character.
                            Tab-completion is supported when using the <code class="highlight">=</code> character.
                        </p>
                    </div>
                    <h4>For example:</h4>
                    <pre class="console">
<span class="commandline">> myexe -persons@=..\data\persons.txt</span></pre>
                    <p>Keep in mind that if the path contains spaces - you'll have to add quotation marks, as in:</p>
                    <pre class="console">
<span class="commandline">> myexe -persons@="c:\input data\persons.txt"</span></pre>
                </div>
                <div sectionid="#custom_types" class="content">
                    <h3>Custom Types</h3>
                    <p>
                        Primitive types are converted from strings and are easily handled by CLAP.
                    </p>
                    <p>
                        In-addition to primitive types, enums and single-dimention arrays, CLAP also supports
                        any type you can represent using a JSON/XML string.
                    </p>
                    <div class="note">
                        <h4>Note</h4>
                        <p>CLAP does not support JSON in .NET Framework v2.0 but only in v3.5 and above.</p>
                    </div>
                    <h4>Example</h4>
                    <p>Suppose we have the following class which contains several properties and a list of another class:</p>
                    <pre class="brush: csharp">
                        public class Person
                        {
                            public int Age { get; set; }
                            public string Name { get; set; }
                            public string Email { get; set; }
                            public List&lt;PhoneNumber> PhoneNumbers { get; set; }
                        }

                        public class PhoneNumber
                        {
                            public string Type { get; set; }
                            public string Number { get; set; }
                        }
                    </pre>
                    <p>We can now create a verb that accepts an instance of that class:</p>
                    <pre class="brush: csharp">
                        [Verb]
                        void SavePerson(Person p)
                        {
                            // do something with the Person instance
                        }
                    </pre>
                    <p>
                        Now we can pass an instance of a Person class from the command-line.
                        We need a JSON (or XML) representation of such an instance:
                    </p>
                    <pre class="brush: javascript">
                        {
                            Age: 34,
                            Name: 'Adrian Aisemberg',
                            Email: 'adrianaisemberg@gmail.com',
                            PhoneNumbers: [
                                {
                                    Type: 'Home',
                                    Number: '001-2232322'
                                },
                                {
                                    Type: 'Mobile',
                                    Number: '002-7787787'
                                },
                                {
                                    Type: 'Office',
                                    Number: '003-4463565'
                                }
                            ]
                        }
                    </pre>
                    <p>
                        As an alternative, CLAP also supports XML:
                    </p>
                    <pre class="brush: xml">
                        &lt;Person>
                            &lt;Age>34&lt;/Age>
                            &lt;Name>Adrian Aisemberg&lt;/Name>
                            &lt;Email>adrianaisemberg@gmail.com&lt;/Email>
                            &lt;PhoneNumbers>
                                &lt;PhoneNumber>
                                    &lt;Type>Home&lt;/Type>
                                    &lt;Number>001-2232322&lt;/Number>
                                &lt;/PhoneNumber>
                                &lt;PhoneNumber>
                                    &lt;Type>Mobile&lt;/Type>
                                    &lt;Number>002-7787787&lt;/Number>
                                &lt;/PhoneNumber>
                                &lt;PhoneNumber>
                                    &lt;Type>Office&lt;/Type>
                                    &lt;Number>003-4463565&lt;/Number>
                                &lt;/PhoneNumber>
                            &lt;/PhoneNumbers>
                        &lt;/Person>
                    </pre>
                    <div class="note">
                        <h4>XML Beautifying</h4>
                        <p>
                            Using some .NET XML tweaks, such as marking properties with <code>[XmlAttribute]</code>,
                            The above XML sample can be represented as the following:
                        </p>
                        <pre class="brush: xml">
                            &lt;Person Age="34" Name="Adrian Aisemberg" Email="adrianaisemberg@gmail.com">
                                &lt;PhoneNumbers>
                                    &lt;PhoneNumber Type="Home" Number="001-2232322"/>
                                    &lt;PhoneNumber Type="Mobile" Number="002-7787787"/>
                                    &lt;PhoneNumber Type="Office" Number="003-4463565"/>
                                &lt;/PhoneNumbers>
                            &lt;/Person>
                        </pre>
                        <p>
                            Note that this topic is unrelated to CLAP and not discussed in this web-site.
                        </p>
                    </div>
                    <p>
                        Instead of passing this whole string (in a single line) directly from the command-line, we better
                        put it in a file and pass the file as an input:
                    </p>
                    <pre class="console">
<span class="commandline">> myexe saveperson -p@=..\data\person.txt</span></pre>
                    <p>Collections are also supported, as in the following example:</p>
                    <pre class="brush: csharp">
                        [Verb]
                        void SavePersons(IEnumerable&lt;Person> p)
                        {
                            // do something with the Persons collection
                        }
                    </pre>
                    <p>A collection of Persons as a JSON string looks like this:</p>
                    <pre class="brush: javascript">
                        [{
                            Age: 34,
                            Name: 'Adrian Aisemberg',
                            Email: 'adrianaisemberg@gmail.com',
                            PhoneNumbers: [
                                { Type: 'Home', Number: '001-2232322' },
                                { Type: 'Mobile', Number: '002-7787787' },
                                { Type: 'Office', Number: '003-4463565' }
                            ]
                        },
                        {
                            Age: 5,
                            Name: 'Yuval Aisemberg',
                            Email: 'yuval@email.com',
                            PhoneNumbers: [
                                { Type: 'Home', Number: '001-2232322' },
                                { Type: 'Mobile', Number: '002-9918172' }
                            ]
                        }]
                    </pre>
                </div>
                <div sectionid="#validation" class="content">
                    <h3>Validation</h3>
                    <p>Validation attributes validate the input before executing the verb.</p>
                    <p>CLAP comes with some built-in validation attributes and custom validation can be easily implemented.</p>
                    <div class="attribute_wrapper" id="validation_lessthan">
                        <div class="attribute">
                            <div class="attribute_name mono">LessThan(double number)</div>
                            <div class="attribute_description">
                                <p>Validates that a numeric value is less than a specified value.</p>
                            </div>
                            <div class="attribute_samples">
                                <h3>Example:</h3>
                                <pre class="brush: csharp, highlight: 4">
                                    class Program
                                    {
                                        [Verb]
                                        void Foo([LessThan(10)] int count)
                                        {
                                        }
                                    }
                                </pre>
                            </div>
                        </div>
                    </div>
                    <div class="attribute_wrapper" id="validation_lessorequalto">
                        <div class="attribute">
                            <div class="attribute_name mono">LessOrEqualTo(double number)</div>
                            <div class="attribute_description">
                                <p>Validates that a numeric value is less or equals a specified value.</p>
                            </div>
                            <div class="attribute_samples">
                                <h3>Example:</h3>
                                <pre class="brush: csharp, highlight: 4">
                                    class Program
                                    {
                                        [Verb]
                                        void Foo([LessOrEqualTo(30.5)] double angle)
                                        {
                                        }
                                    }
                                </pre>
                            </div>
                        </div>
                    </div>
                    <div class="attribute_wrapper" id="validation_morethan">
                        <div class="attribute">
                            <div class="attribute_name mono">MoreThan(double number)</div>
                            <div class="attribute_description">
                                <p>Validates that a numeric value is more than a specified value.</p>
                            </div>
                            <div class="attribute_samples">
                                <h3>Example:</h3>
                                <pre class="brush: csharp, highlight: 4">
                                    class Program
                                    {
                                        [Verb]
                                        void Foo([MoreThan(10)] int count)
                                        {
                                        }
                                    }
                                </pre>
                            </div>
                        </div>
                    </div>
                    <div class="attribute_wrapper" id="validation_moreorequalto">
                        <div class="attribute">
                            <div class="attribute_name mono">MoreOrEqualTo(double number)</div>
                            <div class="attribute_description">
                                <p>Validates that a numeric value is more or equals a specified value.</p>
                            </div>
                            <div class="attribute_samples">
                                <h3>Example:</h3>
                                <pre class="brush: csharp, highlight: 4">
                                    class Program
                                    {
                                        [Verb]
                                        void Foo([MoreOrEqualTo(30.5)] double angle)
                                        {
                                        }
                                    }
                                </pre>
                            </div>
                        </div>
                    </div>
                    <div class="attribute_wrapper" id="validation_regexmatches">
                        <div class="attribute">
                            <div class="attribute_name mono">RegexMatches(string pattern)</div>
                            <div class="attribute_description">
                                <p>Validates that a string value matches a specified regular-expression.</p>
                            </div>
                            <div class="attribute_samples">
                                <h3>Example:</h3>
                                <pre class="brush: csharp, highlight: 4">
                                    class Program
                                    {
                                        [Verb]
                                        void Foo([RegexMatches(@"[0-9a-zA-Z]*")] string name)
                                        {
                                        }
                                    }
                                </pre>
                            </div>
                        </div>
                    </div>
                    <div class="attribute_wrapper" id="validation_fileexists">
                        <div class="attribute">
                            <div class="attribute_name mono">FileExists</div>
                            <div class="attribute_description">
                                <p>Validates that a file exists.</p>
                            </div>
                            <div class="attribute_samples">
                                <h3>Example:</h3>
                                <pre class="brush: csharp, highlight: 4">
                                    class Program
                                    {
                                        [Verb]
                                        void Foo([FileExists] string filePath)
                                        {
                                        }
                                    }
                                </pre>
                            </div>
                        </div>
                    </div>
                    <div class="attribute_wrapper" id="validation_directoryexists">
                        <div class="attribute">
                            <div class="attribute_name mono">DirectoryExists</div>
                            <div class="attribute_description">
                                <p>Validates that a directory exists.</p>
                            </div>
                            <div class="attribute_samples">
                                <h3>Example:</h3>
                                <pre class="brush: csharp, highlight: 4">
                                    class Program
                                    {
                                        [Verb]
                                        void Foo([DirectoryExists] string path)
                                        {
                                        }
                                    }
                                </pre>
                            </div>
                        </div>
                    </div>
                    <div class="attribute_wrapper" id="validation_pathexists">
                        <div class="attribute">
                            <div class="attribute_name mono">PathExists</div>
                            <div class="attribute_description">
                                <p>Validates that a file or a directory exists.</p>
                            </div>
                            <div class="attribute_samples">
                                <h3>Example:</h3>
                                <pre class="brush: csharp, highlight: 4">
                                    class Program
                                    {
                                        [Verb]
                                        void Foo([PathExists] string path)
                                        {
                                        }
                                    }
                                </pre>
                            </div>
                        </div>
                    </div>
                    <div class="attribute_wrapper" id="validation_expression">
                        <div class="attribute">
                            <div class="attribute_name mono">Validate(Expression)</div>
                            <div class="attribute_description">
                                <p>Validates all the arguments against an SQL expression.</p>
                                <p><em>Notice that this is a multiple parameters validator so it is placed over the Verb (or Global) instead of the parameter</em></p>
                                                    <p>
                                See MSDN documentation regarding SQL Expressions:<br />
                                <a href="http://msdn.microsoft.com/en-us/library/system.data.datacolumn.expression.aspx" target="_blank">
                                    http://msdn.microsoft.com/en-us/library/system.data.datacolumn.expression.aspx
                                </a>
                            </p>
                            </div>
                            <div class="attribute_samples">
                                <h3>Examples:</h3>
                                <pre class="brush: csharp, highlight: 4">
                                    class Program
                                    {
                                        [Verb]
                                        [Validate("num1 > num2")]
                                        void Foo1(int num1, int num2)
                                        {
                                        }

                                        [Verb]
                                        [Validate("num1 > num2 AND num2 > 100")]
                                        void Foo2(int num1, int num2)
                                        {
                                        }

                                        [Verb]
                                        [Validate("name LIKE 'John*'", CaseSensitive = true)]
                                        void Foo3(string name)
                                        {
                                        }

                                        [Verb]
                                        [Validate("name IN ('ping','pong')")]
                                        void Foo4(string name)
                                        {
                                        }

                                        [Verb]
                                        [Validate("num1 + num2 >= num3")]
                                        void Foo5(int num1, int num2, int num3)
                                        {
                                        }
                                    }
                                </pre>
                            </div>
                        </div>
                    </div>
                    <div class="attribute_wrapper" id="validation_properties">
                        <div class="attribute">
                            <div class="attribute_name mono">Properties Validation</div>
                            <div class="attribute_description">
                                <p>
                                    All validation attributes can be applied to properties of a custom type.
                                    In-addition, the expression validation attribute can be applied to a custom class.
                                </p>
                                <p>
                                    Following is a sample class having both properties and expression validations.
                                </p>
                            </div>
                            <div class="attribute_samples">
                                <h3>Example:</h3>
                                <pre class="brush: csharp">
                                    // Validate properties of this class
                                    [Validate("Name NOT LIKE 'Banana*'")]
                                    public class Product
                                    {
                                        // Validate the value of this property
                                        [RegexMatches("#PP[0-9]*")]
                                        public string ID { get; set; }

                                        // Validate the value of this property
                                        [MoreOrEqualTo(0)]
                                        public int Index { get; set; }

                                        public string Name { get; set; }

                                        // Validate the properties of the value of this property
                                        [Validate("Name NOT IN 'Adrian','Alon'")]
                                        public ProductReview Review { get; set; }
                                    }

                                    // Validate the properties of all instances of this class
                                    [Validate("Name NOT LIKE 'Bob*'")]
                                    public class ProductReview
                                    {
                                        public string Name { get; set; }

                                        // Validate the value of this property
                                        [RegexMatches(@"^([0-9a-zA-Z]([-.\w]* ... ")]
                                        public string Email { get; set; }
                                    }
                                </pre>
                                <h4>Class vs Instance Expression Validation</h4>
                                <p>
                                    The <code>Validate(Expression)</code> attribute can be applied
                                    to both properties and also classes (in-addition to verbs).
                                </p>
                                <p>
                                    If the attribute is placed over a class - all instances of that class will have to pass the validation.
                                </p>
                                <p>
                                    If the attribute is placed over a property - it will validate the instance of the property, in-addition to the
                                    class's validations.
                                </p>
                                <p>
                                    In the above example, the Name property of a Product's review must pass both validations:
                                    <ul>
                                        <li><code>Name NOT IN 'Adrian','Alon'</code></li>
                                        <li><code>Name NOT LIKE 'Bob*'</code></li>
                                    </ul>
                                </p>
                                <p>
                                    In any other instance of the Review class, not related to Product, the Name property must pass:
                                    <ul>
                                        <li><code>Name NOT LIKE 'Bob*'</code></li>
                                    </ul>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                <div sectionid="#custom_validation" class="content">
                    <h3>Custom Validation</h3>
                    <p>
                        CLAP comes with a set of built-in validation attributes, however,
                        additional custom validation attributes can be easily implemented and used.
                    </p>
                    <div class="attribute_wrapper" id="custom_validation_single">
                        <div class="attribute">
                            <div class="attribute_name mono">ValidationAttribute, IParameterValidator</div>
                            <div class="attribute_description">
                                <p>A single parameter custom validation</p>
                            </div>
                            <div class="attribute_samples">
                                <p>Start with implementing the <code>IParameterValidator</code> interface:</p>
                                <pre class="brush: csharp, highlight: [1,10]">
                                    class LengthValidator : IParameterValidator
                                    {
                                        public int Length { get; private set; }

                                        public LengthValidator(int length)
                                        {
                                            Length = length;
                                        }

                                        public void Validate(ParameterInfo parameter, object value)
                                        {
                                            var str = (string)value;

                                            if (str.Length &lt; Length)
                                            {
                                                throw new ValidationException(
                                                    string.Format("Length should be at least {0}", Length));
                                            }
                                        }
                                    }
                                </pre>
                                <p>
                                    Notice that the <code class="highlight">parameter</code> argument is not used in this example.
                                    The important part is the actual value being validated. The additional
                                    <code>parameter</code> argument is provided in case validation needs to be against 
                                    reflected information about the parameter type, or, if that information is required for creating a
                                    validation error message.<br/>
                                    Anyway, it is provided and can be ignored.
                                </p>
                                <p>Then implement the attribute by deriving from <code>ValidationAttribute</code>:</p>
                                <pre class="brush: csharp, highlight: [2,13]">
                                    [AttributeUsage(AttributeTargets.Parameter)]
                                    class LengthAtLeastAttribute : ValidationAttribute
                                    {
                                        public int Length { get; private set; }

                                        public LengthAtLeastAttribute(int length)
                                        {
                                            Length = length;
                                        }

                                        public override IParameterValidator GetValidator()
                                        {
                                            return new LengthValidator(Length);
                                        }
                            
                                        public override string Description
                                        {
                                            get
                                            {
                                                return string.Format("Length is at least {0}", Length);
                                            }
                                        }
                                    }
                                </pre>
                                <p>
                                    In this example, the attribute is used to validate that an input string has a length of
                                    at least a specified number of characters.
                                    For example:
                                    <pre class="brush: csharp, highlight: [2,7]">
                                        [Verb]
                                        void Foo([LengthAtLeast(10)] string text)
                                        {
                                        }
                                    </pre>
                                    The <code>text</code> argument must be at least 10 characters long, otherwise,
                                    an exception will be thrown.
                                </p>
                                <p>
                                    The <code>Description</code> property is used when generating the help string.
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="attribute_wrapper" id="custom_validation_multiple">
                        <div class="attribute">
                            <div class="attribute_name mono">ParametersValidationAttribute, IInfoValidator&lt;ParameterInfo></div>
                            <div class="attribute_description">
                                <p>Multiple parameters custom validation.</p>
                                <p>Single parameters validators are used to validate parameters against their own values.</p>
                                <p>
                                    With multiple parameters validatiors we can validate the values of all the parameters at once.<br/>
                                    This allows us to validate dependencies between parameters or even complex scenarios.
                                </p>
                                <p><em>Notice that multiple parameters validations are executed <strong>after</strong> all the single validators.</em></p>
                            </div>
                            <div class="attribute_samples">
                                <p>Start with implementing the <code>IInfoValidator&lt;ParameterInfo></code> interface:</p>
                                <h3>Example:</h3>
                                <p>Having the following verb:</p>
                                <pre class="brush: csharp, highlight: [1,10]">
                                    [Verb]
                                    void Foo(int[] numbers, string[] names)
                                    {
                                        for (int i = 0; i < numbers.Length; i++)
                                        {
                                            Console.WriteLine("{0}:{1}", numbers[i], names[i]);
                                        }
                                    }
                                </pre>
                                <p>We want to validate that both input arrays contain the same number of items.</p>
                                <p>
                                    Using single parameter validators is impossible to validate such a scenario.
                                    We will use a custom multiple validator.
                                </p>
                                <pre class="brush: csharp, highlight: 3">
                                    private class SameLengthValidator : IInfoValidator&lt;ParameterInfo>
                                    {
                                        public void Validate(InfoAndValue&lt;ParameterInfo>[] parameters)
                                        {
                                            // At this point - we already know that all the parameters
                                            // have a value that matches their types.
                                            // This validator works only for arrays so we'll add
                                            // a simple assertion for that.
                                            //
                                            Debug.Assert(parameters.All(p => p.Value is Array));

                                            // Cast them all to arrays
                                            //
                                            var arrays = parameters.Select(p => p.Value).Cast&lt;Array>();

                                            // Take the first length
                                            //
                                            var length = arrays.First().Length;

                                            // Validate that all arrays have the same length
                                            //
                                            if (!arrays.All(a => a.Length == length))
                                            {
                                                throw new ValidationException(
                                                    "Not all arrays have the same length.");
                                            }
                                        }
                                    }
                                </pre>
                                <p>Then implement the attribute by deriving from <code>ParametersValidationAttribute</code>:</p>
                                <pre class="brush: csharp, highlight: [2,6]">
                                    [AttributeUsage(AttributeTargets.Method)]
                                    public class SameLengthAttribute : ParametersValidationAttribute
                                    {
                                        public override IInfoValidator&lt;ParameterInfo> GetValidator()
                                        {
                                            return new SameLengthValidator();
                                        }

                                        public override string Description
                                        {
                                            get { return "All arrays are of the same length"; }
                                        }
                                    }
                                </pre>
                                <p>Now we can use the validation attribute:</p>
                                <pre class="brush: csharp, highlight: 2">
                                    [Verb]
                                    [SameLength]
                                    void Foo(int[] numbers, string[] names)
                                    {
                                        for (int i = 0; i < numbers.Length; i++)
                                        {
                                            Console.WriteLine("{0}:{1}", numbers[i], names[i]);
                                        }
                                    }
                                </pre>
                                <p>And if the arrays are not of the same length - a validation exception will be thrown:</p>
                            <pre class="console">
<span class="commandline">> myexe foo -numbers=1,2,3 -names=a,b</span>
CLAP.ValidationException: Not all arrays have the same length.

</pre>
                            <pre class="console">
<span class="commandline">> myexe foo -numbers=1,2,3 -names=a,b,c</span>
1:a
2:b
3:c

</pre>
                            </div>
                        </div>
                    </div>
                </div>
                <div sectionid="#interception" class="content">
                    <h3>Interception</h3>
                    <p>Interception allows running code before and/or after each verb is executed.</p>
                    <p>Interception can be used for logging, exception handling, verb cancellation and more.</p>
                    <div class="attribute_wrapper" id="interception_preverbexecution">
                        <div class="attribute">
                            <div class="attribute_name mono">PreVerbExecution</div>
                            <div class="attribute_description">
                                <p>Marks a method to execute <strong>before</strong> any verb is executed.</p>
                                <p>
                                    Only a single mathod can be marked as a <code>[PreVerbExecution]</code>
                                    and it must match the following signature:
                                </p>
                                <code class="highlight">void Before(PreVerbExecutionContext context) {}</code>
                                <h4>Notice that there is no restriction for the name of the method, only the signature.</h4>
                                <p>
                                    Trying to mark more than one <code>[PreVerbExecution]</code>
                                    will throw a <code>MoreThanOnePreVerbInterceptorException</code>.
                                </p>
                            </div>
                            <div class="attribute_samples">
                                <h3>Example:</h3>
                                <pre class="brush: csharp, highlight: 3">
                                    class Program
                                    {
                                        [PreVerbExecution]
                                        void Before(PreVerbExecutionContext context)
                                        {
                                        }
                                    }
                                </pre>
                            </div>
                        </div>
                    </div>
                    <div class="attribute_wrapper" id="interception_postverbexecution">
                        <div class="attribute">
                            <div class="attribute_name mono">PostVerbExecution</div>
                            <div class="attribute_description">
                                <p>Marks a method to execute <strong>after</strong> any verb is executed.</p>
                                <p>
                                    Only a single mathod can be marked as a <code>[PostVerbExecution]</code>
                                    and it must match the following signature:
                                </p>
                                <code class="highlight">void Before(PostVerbExecutionContext context) {}</code>
                                <h4>Notice that there is no restriction for the name of the method, only the signature.</h4>
                                <p>
                                    Trying to mark more than one <code>[PostVerbExecution]</code>
                                    will throw a <code>MoreThanOnePostVerbInterceptorException</code>.
                                </p>
                            </div>
                            <div class="attribute_samples">
                                <h3>Example:</h3>
                                <pre class="brush: csharp, highlight: 3">
                                    class Program
                                    {
                                        [PostVerbExecution]
                                        void After(PostVerbExecutionContext context)
                                        {
                                        }
                                    }
                                </pre>
                            </div>
                        </div>
                    </div>
                    <div class="attribute_wrapper" id="interception_verbinterception">
                        <div class="attribute">
                            <div class="attribute_name mono">VerbInterception</div>
                            <div class="attribute_description">
                                <p>
                                    Marks a class with a type that implements <code class="highlight">IVerbInterceptor</code>.
                                </p>
                                <p>
                                    The <code>IVerbInterceptor</code> interface requires implementing both
                                    <code>IPreVerbInterceptor</code> and <code>IPostVerbInterceptor</code>.
                                </p>
                                <p>
                                    If only pre or post interception is required - implementing only one of the above interfaces is enough.
                                </p>
                            </div>
                            <div class="attribute_samples">
                                <h3>Example:</h3>
                                <pre class="brush: csharp, highlight: [1,10]">
                                    [VerbInterception(typeof(MyInterception))]
                                    class Program
                                    {
                                        [Verb]
                                        void Foo()
                                        {
                                        }
                                    }

                                    class MyInterception : IVerbInterceptor
                                    {
                                        public void BeforeVerbExecution(PreVerbExecutionContext context)
                                        {
                                        }

                                        public void AfterVerbExecution(PostVerbExecutionContext context)
                                        {
                                        }
                                    }
                                </pre>
                            </div>
                        </div>
                    </div>
                    <div class="attribute_wrapper" id="interception_preverbexecutioncontext">
                        <div class="attribute">
                            <div class="attribute_name mono">PreVerbExecutionContext</div>
                            <div class="attribute_description">
                                <p>
                                    A context object that is passed during verb interception before the verb is executed.
                                </p>
                            </div>
                            <div class="attribute_properties">
                                <h4>Properties:</h4>
                                <div class="attribute_property">
                                    <div class="attribute_property_name mono">Method (CLAP.Method)</div>
                                    <div class="attribute_property_description">The verb method that will be executed.</div>
                                </div>
                                <div class="attribute_property">
                                    <div class="attribute_property_name mono">Target (object)</div>
                                    <div class="attribute_property_description">
                                        Holds the instance of the class that owns the executed verb. In-case the verb is static, Target is null.
                                    </div>
                                </div>
                                <div class="attribute_property">
                                    <div class="attribute_property_name mono">Parameters (ParameterAndValue[])</div>
                                    <div class="attribute_property_description">A collection of the parameters and their values.</div>
                                </div>
                                <div class="attribute_property">
                                    <div class="attribute_property_name mono">UserContext (Dictionary&lt;object, object>)</div>
                                    <div class="attribute_property_description">
                                        A dictionary that can be used to pass data from the pre-interceptor to the post-interceptor.
                                    </div>
                                </div>
                                <div class="attribute_property">
                                    <div class="attribute_property_name mono">Cancel (Boolean)</div>
                                    <div class="attribute_property_description">
                                        A flag that informs the parser to cancel the execution of the verb. The post-interceptor will still be executed even if the verb is cancelled.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="attribute_wrapper" id="interception_postverbexecutioncontext">
                        <div class="attribute">
                            <div class="attribute_name mono">PostVerbExecutionContext</div>
                            <div class="attribute_description">
                                <p>
                                    A context object that is passed during verb interception after the verb was executed.
                                </p>
                            </div>
                            <div class="attribute_properties">
                                <h4>Properties:</h4>
                                <div class="attribute_property">
                                    <div class="attribute_property_name mono">Method (CLAP.Method)</div>
                                    <div class="attribute_property_description">The verb method that was executed.</div>
                                </div>
                                <div class="attribute_property">
                                    <div class="attribute_property_name mono">Target (object)</div>
                                    <div class="attribute_property_description">
                                        Holds the instance of the class that owns the executed verb. In-case the verb is static, Target is null.
                                    </div>
                                </div>
                                <div class="attribute_property">
                                    <div class="attribute_property_name mono">Parameters (ParameterAndValue[])</div>
                                    <div class="attribute_property_description">A collection of the parameters and their values.</div>
                                </div>
                                <div class="attribute_property">
                                    <div class="attribute_property_name mono">UserContext (Dictionary&lt;object, object>)</div>
                                    <div class="attribute_property_description">
                                        A dictionary that can be used to pass data from the pre-interceptor to the post-interceptor.
                                    </div>
                                </div>
                                <div class="attribute_property">
                                    <div class="attribute_property_name mono">Cancelled (Boolean)</div>
                                    <div class="attribute_property_description">
                                        Holds a flag indicating whether the verb execution was cancelled by the pre-interceptor.
                                    </div>
                                </div>
                                <div class="attribute_property">
                                    <div class="attribute_property_name mono">Exception (Exception)</div>
                                    <div class="attribute_property_description">
                                        Holds an exception instance that was thrown in case an error occured during the verb execution.
                                    </div>
                                </div>
                                <div class="attribute_property">
                                    <div class="attribute_property_name mono">Failed (Boolean)</div>
                                    <div class="attribute_property_description">
                                        In case an error occured an <code>Exception</code> is not null, Failed is true.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div sectionid="#expressions" class="content">
                    <h3>Expressions</h3>
                    <p>Creating a verbs class is easy and the result is a beautiful class with clear separation of concerns.</p>
                    <p>
                        Defining error, help and empty handlers, as well as global parameters 
                        can be also implemented using methods on an existing parser.
                        These methods use lambda expressions syntax to define the behavior.
                    </p>
                    <p>
                        If you own all the application's code, there is no real motivation for using the expressions syntax.
                        However, if you don't have the source of the program (you only have the binary)
                        and you can't derive from the program's class (it is sealed) - then adding the extra functionality is possible
                        only using expressions.
                    </p>
                    <div class="attribute_wrapper" id="expressions_empty">
                        <div class="attribute">
                            <div class="attribute_name mono">Register.EmptyHandler(Action handler)</div>
                            <div class="attribute_description">
                                <p>Registers an action that will be executed when no input was provided by the user.</p>
                                <p>
                                    Only a single empty handler can be registered. Trying to register more than one
                                    handler will throw a <code>MoreThanOneEmptyHandlerException</code>.
                                </p>
                            </div>
                            <div class="attribute_samples">
                                <h3>Example:</h3>
                                <pre class="brush: csharp, highlight: 5">
                                    static void Main(string[] args)
                                    {
                                        var p = new Parser&lt;TheApp>();

                                        p.Register.EmptyHandler(() => Console.WriteLine("No Input"));

                                        p.Run(args);
                                    }
                                </pre>
                                <p>This will print "No Input" whenever the exe is executed without any input.</p>
                                <p>Notice that anonymous delegates can be used instead of the lambda expression:</p>
                                <pre class="brush: csharp, highlight: [5,6,7,8]">
                                    static void Main(string[] args)
                                    {
                                        var p = new Parser&lt;TheApp>();

                                        p.Register.EmptyHandler(delegate
                                        {
                                            Console.WriteLine("No Input");
                                        });

                                        p.Run(args);
                                    }
                                </pre>
                                <p>This is more usefull when more than a single statement is to be executed.</p>
                            </div>
                        </div>
                    </div>
                    <div class="attribute_wrapper" id="expressions_help">
                        <div class="attribute">
                            <div class="attribute_name mono">Register.HelpHandler(string names, Action&lt;string> helpHandler)</div>
                            <div class="attribute_description">
                                <p>Registers an action that will be executed when help is requested by the user.</p>
                            </div>
                            <div class="attribute_samples">
                                <h3>Example:</h3>
                                <pre class="brush: csharp, highlight: 5">
                                    static void Main(string[] args)
                                    {
                                        var p = new Parser&lt;TheApp>();

                                        p.Register.HelpHandler("?,h,help", help => Console.WriteLine(help));

                                        p.Run(args);
                                    }
                                </pre>
                                <p>
                                    This will print the help string when either <code class="highlight">-?</code>,
                                    <code class="highlight">-h</code> or <code class="highlight">-help</code> are provided.
                                </p>
                                <p>The help string is automatically generated.</p>
                            </div>
                        </div>
                    </div>
                    <div class="attribute_wrapper" id="expressions_emptyhelp">
                        <div class="attribute">
                            <div class="attribute_name mono">Register.EmptyHelpHandler(Action&lt;string> handler)</div>
                            <div class="attribute_description">
                                <p>Print the help string when no input is provided by the user.</p>
                                <p>
                                    Only a single empty help handler can be registered. Trying to register more than one
                                    handler will throw a <code>MoreThanOneEmptyHandlerException</code>.
                                </p>
                            </div>
                            <div class="attribute_samples">
                                <h3>Example:</h3>
                                <pre class="brush: csharp, highlight: 5">
                                    static void Main(string[] args)
                                    {
                                        var p = new Parser&lt;TheApp>();

                                        p.Register.EmptyHelpHandler(help => Console.WriteLine(help));

                                        p.Run(args);
                                    }
                                </pre>
                                <p>This will print the help string when the program is executed without any arguments.</p>
                            </div>
                        </div>
                    </div>
                    <div class="attribute_wrapper" id="expressions_error">
                        <div class="attribute">
                            <div class="attribute_name mono">Register.ErrorHandler(Action&lt;ExceptionContext> handler)</div>
                            <div class="attribute_description">
                                <p>Registers an action that will be executed when an error occurs.</p>
                                <p>The action can assign a bool value to the <code class="highlight">ReThrow</code> property of the context indicating whether the exception should be re-thrown after handling.</p>
                                <p>If not assigning any value - <code class="highlight">false</code> is the default</p>
                                <p>
                                    Only a single error handler can be registered. Trying to register more than one
                                    handler will throw a <code>MoreThanOneErrorHandlerException</code>.
                                </p>
                            </div>
                            <div class="attribute_samples">
                                <h3>Example:</h3>
                                <p>The following will print the error message in red:</p>
                                <pre class="brush: csharp, highlight: [5,6,7,8,9,10]">
                                    static void Main(string[] args)
                                    {
                                        var p = new Parser&lt;TheApp>();

                                        p.Register.ErrorHandler(context =>
                                        {
                                            Console.ForegroundColor = ConsoleColor.Red;
                                            Console.WriteLine(context.Exception.Message);
                                            Console.ResetColor();
                                        });

                                        p.Run(args);
                                    }
                                </pre>
                                <p>The following will print the error message in red and throw the exception after that:</p>
                                <pre class="brush: csharp, highlight: 11">
                                    static void Main(string[] args)
                                    {
                                        var p = new Parser&lt;TheApp>();

                                        p.Register.ErrorHandler(context =>
                                        {
                                            Console.ForegroundColor = ConsoleColor.Red;
                                            Console.WriteLine(context.Exception.Message);
                                            Console.ResetColor();

                                            context.ReThrow = true;
                                        });

                                        p.Run(args);
                                    }
                                </pre>
                            </div>
                        </div>
                    </div>
                    <div class="attribute_wrapper" id="expressions_global">
                        <div class="attribute">
                            <div class="attribute_name mono">Register.ParameterHandler(string names, Action action, [string description])</div>
                            <div class="attribute_name mono">Register.ParameterHandler&lt;T>(string names, Action&lt;T> action, [string description])</div>
                            <div class="attribute_description">
                                <p>Registers a parameter handler.</p>
                                <p>
                                    A parameter handler can be either an action that accepts no arguments
                                    or an action that accepts one of the support argument types.
                                </p>
                                <p>If the action accept no arguments (<code>Action</code>) it is treated as a boolean switch.</p>
                                <p>If the action accpets one parameter of the supported types, the value of the argument is passed to the handler.</p>
                                <p><em>See the <code>Parameter</code> attribute section for a list of supported types.</em></p>
                                <p>The <code>description</code> parameter is used to generate the help string.</p>
                            </div>
                            <div class="attribute_samples">
                                <h3>Example:</h3>
                                <pre class="brush: csharp, highlight: [5,6,7,8]">
                                    static void Main(string[] args)
                                    {
                                        var p = new Parser&lt;TheApp>();

                                        p.Register.ParameterHandler("d,debug", () => Debugger.Launch());
                                        p.Register.ParameterHandler&lt;int>(
                                            "p,pause",
                                            seconds => Thread.Sleep(1000 * seconds));

                                        p.Run(args);
                                    }
                                </pre>
                                <p>This will launch the debugger when the user enters either <code class="highlight">-d</code> or <code class="highlight">-debug</code>.</p>
                                <p>
                                    In-addition, when using <code class="highlight">-p</code> or <code class="highlight">-pause</code>,
                                    the execution will pause for the specified seconds, for example: <code class="highlight">-p=5</code>.
                                </p>
                                <p>
                                    Arguments are handled in the input order.<br />
                                    For example, entering <code class="highlight">-d -p=5</code> will first trigger the debugger and will then pause.<br />
                                    Entering <code class="highlight">-p=5 -d</code> will first pause and then trigger the debugger.
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="attribute_wrapper" id="expressions_preverbinterceptor">
                        <div class="attribute">
                            <div class="attribute_name mono">Register.PreVerbInterceptor(Action&lt;PreVerbExecutionContext> interceptor)</div>
                            <div class="attribute_description">
                                <p>Registers a verb interceptor that will be executed <strong>before</strong> any verb.</p>
                                <p>See the <code>PreVerbExecutionContext</code> section for more info about the context object.</p>
                                <p>
                                    Only a single interceptor can be registered. Trying to register more than one
                                    interceptor will throw a <code>MoreThanOnePreVerbInterceptorException</code>.
                                </p>
                            </div>
                            <div class="attribute_samples">
                                <h3>Example:</h3>
                                <pre class="brush: csharp, highlight: 5">
                                    static void Main(string[] args)
                                    {
                                        var p = new Parser&lt;TheApp>();

                                        p.Register.PreVerbInterceptor(context =>
                                        {
                                            // Log the method name
                                            //
                                            Log.Write("START: " + context.Method.MethodInfo.Name);

                                            // Add the current time to the context
                                            //
                                            context.UserContext.Add("START", DateTime.Now);
                                        });

                                        p.Run(args);
                                    }
                                </pre>
                            </div>
                        </div>
                    </div>
                    <div class="attribute_wrapper" id="expressions_postverbinterceptor">
                        <div class="attribute">
                            <div class="attribute_name mono">Register.PostVerbInterceptor(Action&lt;PostVerbExecutionContext> interceptor)</div>
                            <div class="attribute_description">
                                <p>Registers a verb interceptor that will be executed <strong>after</strong> any verb.</p>
                                <p>See the <code>PostVerbExecutionContext</code> section for more info about the context object.</p>
                                <p>
                                    Only a single interceptor can be registered. Trying to register more than one
                                    interceptor will throw a <code>MoreThanOnePostVerbInterceptorException</code>.
                                </p>
                            </div>
                            <div class="attribute_samples">
                                <h3>Example:</h3>
                                <pre class="brush: csharp, highlight: 5">
                                    static void Main(string[] args)
                                    {
                                        var p = new Parser&lt;TheApp>();

                                        p.Register.PostVerbInterceptor(context =>
                                        {
                                            // Log the method name
                                            //
                                            Log.Write("END: " + context.Method.MethodInfo.Name);

                                            // Take the "START" user context value
                                            //
                                            var start = (DateTime)context.UserContext["START"];

                                            // Log the time it took to execute the verb
                                            //
                                            Log.Write(DateTime.Now.Subtract(start).ToString());
                                        });

                                        p.Run(args);
                                    }
                                </pre>
                            </div>
                        </div>
                    </div>
                </div>
                <div sectionid="#multi_parsers" class="content">
                    <h3>Multi Parsers</h3>
                    <p>A parser can be executed on multiple verb-classes.</p>
                    <p>When a parser is executed on multiple classes, the user must add the class name (case-insensitive) as a prefix to each verb.</p>
                    <div class="attribute_samples">
                        <h3>Example:</h3>
                        <pre class="brush: csharp, highlight: 3">
                            static void Main(string[] args)
                            {
                                Parser.Run&lt;App1, App2, App3>(args);
                            }
                        </pre>
                        <p>This will run a static parser (having only static verbs) of the three specified types.</p>
                        <p>The same rules as a single parser regarding instance vs. static parsers apply also here:</p>
                        <pre class="brush: csharp, highlight: 7">
                            static void Main(string[] args)
                            {
                                var a1 = new App1();
                                var a2 = new App2();
                                var a3 = new App3();

                                Parser.Run&lt;App1, App2, App3>(args, a1, a2, a3);
                            }
                        </pre>
                        <p>
                            Having the verb <code>foo</code> in each of the above classes,
                            the user may call each one of them with the class name as a prefix:
                        </p>
                        <p class="console">> myexe <strong>app1.</strong>foo -param1 -param2 ...</p>
                        <div class="note">
                            <h4>Notes</h4>
                            <ul>
                                <li>
                                    <strong>Global, Error, Help, Empty:</strong> They are all available only in the class's context and not
                                    for the whole multi-parser.<br />
                                    Having a global parameter in app1 will not make it available for app2.
                                </li>
                                <li>
                                    <strong>Registered Expressions:</strong> Are available for the whole multi-parser.<br />
                                    Having a registered global handler makes it available for each class.
                                    The same goes for all expressions, such as interceptors and help handlers.
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div sectionid="#examples" class="content">
                    <h3>Examples</h3>
                    <p>
                        In this section you can see some sample classes.
                        At the bottom you can see execution samples with the resulting output.
                    </p>
                    <h4>A useful base class for all console applications:</h4>
                    <div class="attribute">
                        <pre class="brush: csharp">
                            class ConsoleBase
                            {
                                [Error]
                                void Error(ExceptionContext context)
                                {
                                    Console.ForegroundColor = ConsoleColor.Red;
                                    Console.WriteLine(context.Exception.Message);
                                    Console.ResetColor();
                                }

                                [Empty]
                                [Help(Aliases = "h,?")]
                                void Help(string help)
                                {
                                    Console.WriteLine(help);
                                }

                                [Global]
                                void Debug()
                                {
                                    Debugger.Launch();
                                }
                            }
                        </pre>
                        <p>Deriving from that class gives you:</p>
                        <ul>
                            <li>Errors will be handled and printed in red</li>
                            <li>
                                Either <code class="highlight">-h</code>, <code class="highlight">-?</code>,
                                <code class="highlight">-help</code> or an empty input will print the genareted help
                            </li>
                            <li><code class="highlight">-debug</code> will launch the debugger</li>
                        </ul>
                    </div>
                    <h4>A class with some verbs and validation:</h4>
                    <div class="attribute">
                        <pre class="brush: csharp">
                            class TheApp : BaseApp
                            {
                                [Verb(IsDefault = true, Description = "Prints 'Hello' and a name")]
                                void Hello(
                                    
                                    [Parameter(Aliases = "n", Required = true, Description = "The name")]
                                    string name,
                                    
                                    [LessOrEqualTo(30)]
                                    [Parameter(Aliases = "c", Default = 10, 
                                               Description = "The number of lines to print")]
                                    int count)
                                {
                                    for (int i = 0; i &lt; count; i++)
                                    {
                                        Console.WriteLine("Hello {0}", name);
                                    }
                                }

                                [Verb(Aliases = "cart")]
                                void Cartesian(int[] numbers, string[] names)
                                {
                                    foreach (var number in numbers)
                                    {
                                        foreach (var name in names)
                                        {
                                            Console.WriteLine("{0}:{1}", number, name);
                                        }
                                    }
                                }

                                [Verb]
                                void Count(
                                    [LessOrEqualTo(50), MoreOrEqualTo(0)] int start,
                                    [LessOrEqualTo(100), MoreThan(50)] int end,
                                    [Parameter(Aliases = "p,pause", Default = 1.5)] double pauseSeconds,
                                    [Parameter(Aliases = "align")] Alignment alignment)
                                {
                                    var sign = alignment == Alignment.Left ? "-" : "";

                                    var format = "{0," + sign + "5}";

                                    for (int i = start; i &lt;= end; i++)
                                    {
                                        Console.WriteLine(format, i);

                                        Thread.Sleep((int)(pauseSeconds * 1000));
                                    }
                                }

                                public enum Alignment
                                {
                                    Right,
                                    Left,
                                }
                            }
                        </pre>
                        <p>The first verb, <code>Hello</code>, is the default verb and it has two parameters:</p>
                        <ol>
                            <li><code class="highlight">name</code>: Required and has an alias "n".</li>
                            <li>
                                <code class="highlight">count</code>: Has a default of 10 and an alias "c".
                                The value has to be less or equal to 30 to be valid.
                            </li>
                        </ol>
                        <p>
                            The second verb, <code>Cartesian</code>, prints all possible combinations of two given arrays
                            (a Cartesian product). The verb has two parameters:
                        </p>
                        <ol>
                            <li><code class="highlight">numbers</code>: A list of numbers.</li>
                            <li><code class="highlight">names</code>: A list of names.</li>
                        </ol>
                        <p>
                            The third verb, <code>Count</code>, prints a list of numbers 
                            with left or right alignment and a pause between each line. The verb has four parameters:
                        </p>
                        <ol>
                            <li><code class="highlight">start</code>: The value has to be between 0 and 50.</li>
                            <li><code class="highlight">end</code>: The value has to between 50 and 100.</li>
                            <li><code class="highlight">pauseSeconds</code>: Default of 1.5 and aliases: "p" and "pause".</li>
                            <li><code class="highlight">alignment</code>: An enum with an alias "align".</li>
                        </ol>
                        <p>Sample run:</p>
                        <pre class="console">
<span class="commandline">> myexe hello -n=CLAP -c=5</span>
Hello CLAP
Hello CLAP
Hello CLAP
Hello CLAP
Hello CLAP</pre>
                        <pre class="console">
<span class="commandline">> myexe cart -numbers=1,5,8 -names=a,g,u,t</span>
1:a
1:g
1:u
1:t
5:a
5:g
5:u
5:t
8:a
8:g
8:u
8:t</pre>
                        <pre class="console">
<span class="commandline">> myexe count -start=1 -end=55 -p=0.1 -align=Left</span>
1
2
3
4
...
55</pre>
                        <pre class="console">
<span class="commandline">> myexe count -start=10 -end=55 -p=0.1 -align=Right</span>
    10
    11
    12
    13
    ...
    55</pre>
                        <p>
                            Notice that all names, including the verbs and parameters,
                            are <strong>case-insensitive</strong> but enum values are <strong>case-sensitive</strong>.
                        </p>
                    </div>
                </div>
                <div sectionid="#download" class="content">
                    <h3>Download</h3>
                    <p>Two options to get CLAP:</p>
                    <ul>
                        <li>
                            <p>Using <strong>NuGet</strong> is the best option:</p>
                            <p class="console"><strong>PM></strong> Install-Package clap</p>
                            <p>More info about NuGet: <a href="http://nuget.org/" target="_blank">nuget.org</a></p>
                        </li>
                        <li>
                            <p>Downloading the binaries is also cool:</p>
                            <a href="https://github.com/adrianaisemberg/CLAP/downloads" target="_blank">Download from github</a>
                            <p>
                                Pay attention to download the package that best matches your application's framework version,
                                either for .NET Framework 2.0 or 3.5+.
                            </p>
                        </li>
                    </ul>
                </div>
                <div sectionid="#history" class="content">
                    <h3>History</h3>
                    <ul>
                        <li>
                            <h4>v3.0 (Nov 02, 2011)</h4>
                            <ul>
                                <li><strong>NEW:</strong> Interception (<a target="_blank" href="https://github.com/kurtaj">kurtaj</a>)</li>
                                <li><strong>NEW:</strong> Multi-Parsers</li>
                                <li><strong>BREAKING CHANGE:</strong> Error handling using <code class="highlight">ExceptionContext</code> instead of <code>Exception</code></li>
                                <li><strong>BREAKING CHANGE:</strong> <code class="highlight">ReThrow</code> was moved from <code>ErrorAttribute</code> to <code>ExceptionContext</code></li>
                            </ul>
                        </li>
                        <li>
                            <h4>v2.4 (Oct 25, 2011)</h4>
                            <ul>
                                <li><strong>NEW:</strong> File-Input</li>
                                <li><strong>NEW:</strong> Complex Types support using JSON/XML</li>
                                <li><strong>NEW:</strong> Properties validation (in-addition to parameters validation)</li>
                            </ul>
                        </li>
                    </ul>
                </div>
                <div sectionid="#about" class="content">
                    <h3>About</h3>
                    <p>CLAP: A free and open-source project by Adrian Aisemberg (<a href="mailto:adrianaisemberg@gmail.com">adrianaisemberg@gmail.com</a>).</p>
                    <p>More by Adrian:</p>
                    <ul>
                        <li><a href="http://www.vercue.com" target="_blank">vercue.com</a>: A kick-ass svn client for Windows</li>
                        <li><a href="http://www.sharpregion.com" target="_blank">sharpregion.com</a>: A kick-ass blog about vercue</li>
                    </ul>
                </div>
                <div sectionid="#license" class="content">
                    <h3>License</h3>
                    <div class="fixedfont">
                        <p>MIT License</p>
                        <p>Copyright (c) 2011 Adrian Aisemberg, SharpRegion</p>
                        <p>
                            Permission is hereby granted, free of charge, to any person obtaining a copy of this software
                            and associated documentation files (the "Software"), to deal in the Software without restriction,
                            including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense,
                            and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so,
                            subject to the following conditions:
                        </p>
                        <p>
                            The above copyright notice and this permission notice shall be included in all copies or substantial
                            portions of the Software.
                        </p>
                        <p>
                            THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,
                            INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE
                            AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
                            DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
                            OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.                    
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="footer">
        <a href="http://www.sharpregion.com" target="_blank">SharpRegion</a>
        <span class="color">&#9679;</span>
        <a href="http://www.vercue.com" target="_blank">Vercue</a>
        <span class="color">&#9679;</span>
        By <a href="mailto:adrianaisemberg@gmail.com">Adrian Aisemberg</a>
    </div>
</body>
</html>